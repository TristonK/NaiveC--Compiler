# 实验报告

**`171240501 匡舒磊`** 

**`kuangsl@foxmail.com 基础班`**

## 已实现内容

完成了所有内容

## 代码框架

`lexical.l` : 词法内容识别

`syntax.y` : 语法内容分析，并建立相应的语法树节点

`common.h` : 函数定义与相关结构体定义

`ast.c` : 语法树的相关函数，包括添加节点打印语法树等

`main.c`: 运行分析

`openhash.c` 与哈希表操作相关，包括插入删除查询等操作

`ir.c` 中间代码生成与优化过程

`ir_file.c` 中间代码输出

`optimize.c` 代码优化

`mips.c` mips代码翻译过程

`mips_out.c` mips代码输出

## 如何编译

使用助教提供的Makefile进行编译生成parser

## 实验环境

GNU Linux Realease: Ubuntu 18.04.4 LTS

GCC version 7.5.0 

GNU Flex 2.6.4

GNU Bison 3.0.4

QtSPIM 9.1.9

## 实现的重点细节

1. 实现过程

   利用了讲义中提到的最朴素的做法，朴素式分配寄存器，把所有的变量放到栈上面（即使是函数的参数也被朴素的放上去了），同时为了避免麻烦的计算，我直接先把栈设的很大（这样就避免对sp的反复计算了），然后以fp为基准对各个变量进行定位。

2. 数组赋值的实现

   

## 实验中遇到的困难/不足

1. 非常遗憾，没有做太多的优化，很多优化是可以做的，但是因为bug太多，加上自己喜欢拖ddl，导致自己没有很好的考虑优化。
2. 数组和结构体的赋值与引用一开始没有思考清楚或者少考虑了一些情况，导致de了很久的bug，希望下次更加细心。