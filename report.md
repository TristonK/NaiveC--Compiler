# 实验报告

**`171240501 匡舒磊`** 

**`kuangsl@foxmail.com 基础班`**

## 已实现内容

完成了所有必做内容与选做内容,并对中间代码进行了少量的优化。

## 代码框架

`lexical.l` : 词法内容识别

`syntax.y` : 语法内容分析，并建立相应的语法树节点

`common.h` : 函数定义与相关结构体定义

`ast.c` : 语法树的相关函数，包括添加节点打印语法树等

`main.c`: 运行分析

`openhash.c` 与哈希表操作相关，包括插入删除查询等操作

`ir.c` 中间代码生成与优化过程

`ir_file.c` 中间代码输出

## 如何编译

使用助教提供的Makefile进行编译生成parser

## 实验环境

GNU Linux Realease: Ubuntu 18.04.4 LTS

GCC version 7.5.0 

GNU Flex 2.6.4

GNU Bison 3.0.4

## 实现的重点细节

1. 数组赋值的实现

## 代码优化

1. 常数计算直接计算

## 实验中遇到的困难/不足

1. 原本想实现申请内存后的free，但是实在bug太多了（/(ㄒoㄒ)/~~），最后决定放弃free只申请不释放，在超强测试的大输入时或许可能会出现问题。

2. 在结构体和函数的局部变量定义中函数理论上可以做到复用统一成一个接口，但是因为写的顺序的原因加上重构比较复杂就放弃了，导致代码略微冗长。